{"head":{"title":"Automatic deployment on GitHub Pages","description":"Be sure that you use the phenomic.CNAME option in your configuration You will have multiple possibilities to deploy your dist folder on theâ€¦"},"body":"<p><strong>Be sure that you use the <code>phenomic.CNAME</code> option in your\n<a href=\"./configuration/\">configuration</a></strong></p>\n<p>You will have multiple possibilities to deploy your <code>dist</code> folder on the\n<code>gh-pages</code> branch.</p>\n<p>You can use your own method, using something like</p>\n<ul>\n<li>a very simple script (see below)</li>\n<li><a href=\"https://www.npmjs.com/package/buildbranch\">buildbranch</a></li>\n<li><a href=\"https://github.com/X1011/git-directory-deploy\">git-directory-deploy</a></li>\n<li><a href=\"https://www.npmjs.com/package/gh-pages\">gh-pages</a></li>\n</ul>\n<hr>\n<p>The following instructions show you how to do it by force pushing your build to\nthe <code>gh-pages</code> branch,\nbut it should not be very different from other solutions.</p>\n<h2 id=\"why-force-pushing\"><a href=\"#why-force-pushing\" class=\"phenomic-HeadingAnchor\">#</a>Why force pushing?</h2>\n<p>Why do you want to keep track of the builded website when you can just rebuild\nit any time?<br>\n<strong>Keep in mind that the branch can become huge since builded website is mainly\nsingle line HTML and JSON file (diff is expensive).</strong><br>\nBy just keeping a single builded version, you avoid your repo to unnecessarily grow in size.</p>\n<h2 id=\"create-the-script\"><a href=\"#create-the-script\" class=\"phenomic-HeadingAnchor\">#</a>Create the script</h2>\n<p>The script below will get a <code>GIT_DEPLOY_REPO</code> repo to deploy (or by default\nthe <code>repository</code> url of your <code>package.json</code>).</p>\n<p>You can paste it under <code>./scripts/deploy.sh</code>.</p>\n<h3 id=\"os-x--linux\"><a href=\"#os-x--linux\" class=\"phenomic-HeadingAnchor\">#</a>OS X / Linux</h3>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-meta\">#!/usr/bin/env bash</span>\nGIT_DEPLOY_REPO=<span class=\"hljs-variable\">${GIT_DEPLOY_REPO:-$(node -e 'process.stdout.write(require(\"./package.json\").repository)')}</span>\n\n<span class=\"hljs-built_in\">cd</span> dist &amp;&amp; \\\n$(npm bin)/rimraf .git\ngit init &amp;&amp; \\\ngit add . &amp;&amp; \\\ngit commit -m <span class=\"hljs-string\">\"Deploy to GitHub Pages\"</span> &amp;&amp; \\\ngit push --force <span class=\"hljs-string\">\"<span class=\"hljs-variable\">${GIT_DEPLOY_REPO}</span>\"</span> master:gh-pages</code></pre>\n<p><em>If you want to use this script for a <code>*.github.io</code> repo, please adjust the\nlast line argument to <code>src:master</code> (if you source branch is <code>src</code>) in order\nto deploy your source branch to <code>master</code> (which is the <code>gh-pages</code> branch for\ngithub.io repos).</em></p>\n<h3 id=\"windows\"><a href=\"#windows\" class=\"phenomic-HeadingAnchor\">#</a>Windows</h3>\n<p>@todo (should not be hard to adapt the shell script above into a bat script,\nplease make a PR if you do it).</p>\n<h3 id=\"add-a-command-to-deploy\"><a href=\"#add-a-command-to-deploy\" class=\"phenomic-HeadingAnchor\">#</a>Add a command to deploy</h3>\n<p>In your <code>package.json</code>, add the following items under the <code>scripts</code> section:</p>\n<pre><code class=\"hljs language-js\">{\n  <span class=\"hljs-string\">\"scripts\"</span>: {\n    <span class=\"hljs-comment\">// ...</span>\n    <span class=\"hljs-string\">\"predeploy\"</span>: <span class=\"hljs-string\">\"npm run build\"</span>,\n    <span class=\"hljs-string\">\"deploy\"</span>: <span class=\"hljs-string\">\"./scripts/deploy.sh\"</span>\n  }\n}</code></pre>\n<p>Now run:</p>\n<pre><code class=\"hljs language-console\">$ npm run deploy</code></pre>\n<p>It should be good!</p>\n<h4 id=\"automatically-with-travis-ci\"><a href=\"#automatically-with-travis-ci\" class=\"phenomic-HeadingAnchor\">#</a>Automatically with Travis-CI</h4>\n<p>Here is one quick and easy way to setup automatic deployment on each commit\npushed to master that should take a couple of minutes to setup:</p>\n<h5 id=\"enable-travis-ci-for-your-repository\"><a href=\"#enable-travis-ci-for-your-repository\" class=\"phenomic-HeadingAnchor\">#</a>Enable Travis-CI for your repository</h5>\n<ul>\n<li><a href=\"https://travis-ci.org/profile\">https://travis-ci.org/profile</a></li>\n</ul>\n<p>You may need to hit the <code>Sync</code> button to see your repository if it&#x27;s not there.</p>\n<h5 id=\"create-a-travisyml\"><a href=\"#create-a-travisyml\" class=\"phenomic-HeadingAnchor\">#</a>Create a <code>.travis.yml</code></h5>\n<pre><code class=\"hljs language-yml\"><span class=\"hljs-attr\">language:</span> node_js\n<span class=\"hljs-attr\">node_js:</span>\n<span class=\"hljs-bullet\">  -</span> <span class=\"hljs-string\">'5'</span>\n<span class=\"hljs-bullet\">  -</span> <span class=\"hljs-string\">'4'</span>\n\n<span class=\"hljs-comment\"># (by default, Travis will run \"npm test\" script when the language is node_js)</span>\n\n<span class=\"hljs-comment\"># deploy is run after \"npm test\"</span>\n<span class=\"hljs-attr\">deploy:</span>\n  <span class=\"hljs-comment\"># keep the build we just made with \"npm test\" (dist/)</span>\n<span class=\"hljs-attr\">  skip_cleanup:</span> <span class=\"hljs-literal\">true</span>\n\n  <span class=\"hljs-comment\"># define the script to use for deployment</span>\n<span class=\"hljs-attr\">  provider:</span> script\n<span class=\"hljs-attr\">  script:</span> ./scripts/deploy.sh\n\n  <span class=\"hljs-comment\"># only run on one version of node (v5 here)</span>\n<span class=\"hljs-attr\">  on:</span>\n<span class=\"hljs-attr\">    branch:</span> master\n<span class=\"hljs-attr\">    node:</span> <span class=\"hljs-string\">'5'</span></code></pre>\n<h5 id=\"generate-a-new-token\"><a href=\"#generate-a-new-token\" class=\"phenomic-HeadingAnchor\">#</a>Generate a new token</h5>\n<ul>\n<li><a href=\"https://github.com/settings/tokens/new\">https://github.com/settings/tokens/new</a></li>\n</ul>\n<p>With only <code>repo</code> or <code>public_repo</code> scopes.</p>\n<h5 id=\"copy-and-encrypt-this-new-token\"><a href=\"#copy-and-encrypt-this-new-token\" class=\"phenomic-HeadingAnchor\">#</a>Copy and encrypt this new token</h5>\n<p><em>Note: replace <code>{YOU/YOUR_REPO}</code> and <code>{YOUR_TOKEN}</code>.</em></p>\n<pre><code class=\"hljs language-console\">$ npm i -g travis-encrypt\n$ travis-encrypt --add --repo {YOU/YOUR_REPO} GITHUB_TOKEN={YOUR_TOKEN}</code></pre>\n<h2 id=\"adjust-the-deploy-script\"><a href=\"#adjust-the-deploy-script\" class=\"phenomic-HeadingAnchor\">#</a>Adjust the deploy script</h2>\n<p><strong>You need to add a git user email and name:</strong></p>\n<pre><code class=\"hljs language-sh\"><span class=\"hljs-meta\">#!/usr/bin/env bash</span>\nGIT_DEPLOY_REPO=<span class=\"hljs-variable\">${GIT_DEPLOY_REPO:-$(node -e 'process.stdout.write(require(\"./package.json\").repository)')}</span>\n\n<span class=\"hljs-keyword\">if</span> [ <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$TRAVIS</span>\"</span> = <span class=\"hljs-string\">\"true\"</span> ]\n<span class=\"hljs-keyword\">then</span>\n  <span class=\"hljs-comment\"># git need this, on Travis-CI nobody is defined</span>\n  git config --global user.name <span class=\"hljs-string\">\"Travis CI\"</span> &amp;&amp; \\\n  git config --global user.email <span class=\"hljs-string\">\"travis@travis-ci.org\"</span>\n<span class=\"hljs-keyword\">fi</span>\n\n<span class=\"hljs-built_in\">cd</span> dist &amp;&amp; \\\n$(npm bin)/rimraf .git &amp;&amp; \\\ngit init &amp;&amp; \\\ngit add . &amp;&amp; \\\ngit commit -m <span class=\"hljs-string\">\"Deploy to GitHub Pages\"</span> &amp;&amp; \\\ngit push --force <span class=\"hljs-string\">\"<span class=\"hljs-variable\">${GIT_DEPLOY_REPO}</span>\"</span> master:gh-pages</code></pre>\n<h5 id=\"ensure-that-the-build-is-done-on-the-ci\"><a href=\"#ensure-that-the-build-is-done-on-the-ci\" class=\"phenomic-HeadingAnchor\">#</a>Ensure that the build is done on the CI</h5>\n<p>If not already made, add a <code>test</code> script in your <code>package.json</code> <code>scripts</code>\nsection.</p>\n<pre><code class=\"hljs language-js\">{\n  <span class=\"hljs-string\">\"scripts\"</span>: {\n    <span class=\"hljs-string\">\"test\"</span>: <span class=\"hljs-string\">\"npm run build\"</span>,\n    <span class=\"hljs-comment\">// ...</span>\n    <span class=\"hljs-string\">\"predeploy\"</span>: <span class=\"hljs-string\">\"npm run build\"</span>,\n    <span class=\"hljs-string\">\"deploy\"</span>: <span class=\"hljs-string\">\"./scripts/deploy.sh\"</span>\n  }\n}</code></pre>\n<p>Now, commit and push to master, wait a couple of minutes and it should be good.</p>\n<p><em>If you plan to rely on Travis only, you can remove the <code>predeploy</code> and\n<code>deploy</code> scripts that we defined earlier.</em>\nOr you can keep it, just in case.</p>\n","rawBody":"\n**Be sure that you use the ``phenomic.CNAME`` option in your\n[configuration](./configuration/)**\n\nYou will have multiple possibilities to deploy your `dist` folder on the\n`gh-pages` branch.\n\nYou can use your own method, using something like\n- a very simple script (see below)\n- [buildbranch](https://www.npmjs.com/package/buildbranch)\n- [git-directory-deploy](https://github.com/X1011/git-directory-deploy)\n- [gh-pages](https://www.npmjs.com/package/gh-pages)\n\n---\n\nThe following instructions show you how to do it by force pushing your build to\nthe ``gh-pages`` branch,\nbut it should not be very different from other solutions.\n\n## Why force pushing?\n\nWhy do you want to keep track of the builded website when you can just rebuild\nit any time?  \n**Keep in mind that the branch can become huge since builded website is mainly\nsingle line HTML and JSON file (diff is expensive).**  \nBy just keeping a single builded version, you avoid your repo to unnecessarily grow in size.\n\n## Create the script\n\nThe script below will get a ``GIT_DEPLOY_REPO`` repo to deploy (or by default\nthe ``repository`` url of your ``package.json``).\n\nYou can paste it under ``./scripts/deploy.sh``.\n\n### OS X / Linux\n\n```bash\n#!/usr/bin/env bash\nGIT_DEPLOY_REPO=${GIT_DEPLOY_REPO:-$(node -e 'process.stdout.write(require(\"./package.json\").repository)')}\n\ncd dist && \\\n$(npm bin)/rimraf .git\ngit init && \\\ngit add . && \\\ngit commit -m \"Deploy to GitHub Pages\" && \\\ngit push --force \"${GIT_DEPLOY_REPO}\" master:gh-pages\n```\n\n_If you want to use this script for a ``*.github.io`` repo, please adjust the\nlast line argument to ``src:master`` (if you source branch is `src`) in order\nto deploy your source branch to ``master`` (which is the ``gh-pages`` branch for\ngithub.io repos)._\n\n### Windows\n\n@todo (should not be hard to adapt the shell script above into a bat script,\nplease make a PR if you do it).\n\n### Add a command to deploy\n\nIn your `package.json`, add the following items under the `scripts` section:\n\n```js\n{\n  \"scripts\": {\n    // ...\n    \"predeploy\": \"npm run build\",\n    \"deploy\": \"./scripts/deploy.sh\"\n  }\n}\n```\n\nNow run:\n\n```console\n$ npm run deploy\n```\n\nIt should be good!\n\n#### Automatically with Travis-CI\n\nHere is one quick and easy way to setup automatic deployment on each commit\npushed to master that should take a couple of minutes to setup:\n\n##### Enable Travis-CI for your repository\n\n- https://travis-ci.org/profile\n\nYou may need to hit the `Sync` button to see your repository if it's not there.\n\n##### Create a `.travis.yml`\n\n```yml\nlanguage: node_js\nnode_js:\n  - '5'\n  - '4'\n\n# (by default, Travis will run \"npm test\" script when the language is node_js)\n\n# deploy is run after \"npm test\"\ndeploy:\n  # keep the build we just made with \"npm test\" (dist/)\n  skip_cleanup: true\n\n  # define the script to use for deployment\n  provider: script\n  script: ./scripts/deploy.sh\n\n  # only run on one version of node (v5 here)\n  on:\n    branch: master\n    node: '5'\n```\n\n##### Generate a new token\n\n- https://github.com/settings/tokens/new\n\nWith only `repo` or `public_repo` scopes.\n\n##### Copy and encrypt this new token\n\n*Note: replace `{YOU/YOUR_REPO}` and `{YOUR_TOKEN}`.*\n\n```console\n$ npm i -g travis-encrypt\n$ travis-encrypt --add --repo {YOU/YOUR_REPO} GITHUB_TOKEN={YOUR_TOKEN}\n```\n\n## Adjust the deploy script\n\n__You need to add a git user email and name:__\n\n```sh\n#!/usr/bin/env bash\nGIT_DEPLOY_REPO=${GIT_DEPLOY_REPO:-$(node -e 'process.stdout.write(require(\"./package.json\").repository)')}\n\nif [ \"$TRAVIS\" = \"true\" ]\nthen\n  # git need this, on Travis-CI nobody is defined\n  git config --global user.name \"Travis CI\" && \\\n  git config --global user.email \"travis@travis-ci.org\"\nfi\n\ncd dist && \\\n$(npm bin)/rimraf .git && \\\ngit init && \\\ngit add . && \\\ngit commit -m \"Deploy to GitHub Pages\" && \\\ngit push --force \"${GIT_DEPLOY_REPO}\" master:gh-pages\n```\n\n##### Ensure that the build is done on the CI\n\nIf not already made, add a `test` script in your `package.json` `scripts`\nsection.\n\n```js\n{\n  \"scripts\": {\n    \"test\": \"npm run build\",\n    // ...\n    \"predeploy\": \"npm run build\",\n    \"deploy\": \"./scripts/deploy.sh\"\n  }\n}\n```\n\nNow, commit and push to master, wait a couple of minutes and it should be good.\n\n_If you plan to rely on Travis only, you can remove the `predeploy` and\n`deploy` scripts that we defined earlier._\nOr you can keep it, just in case.\n","raw":"---\ntitle: Automatic deployment on GitHub Pages\n---\n\n**Be sure that you use the ``phenomic.CNAME`` option in your\n[configuration](./configuration/)**\n\nYou will have multiple possibilities to deploy your `dist` folder on the\n`gh-pages` branch.\n\nYou can use your own method, using something like\n- a very simple script (see below)\n- [buildbranch](https://www.npmjs.com/package/buildbranch)\n- [git-directory-deploy](https://github.com/X1011/git-directory-deploy)\n- [gh-pages](https://www.npmjs.com/package/gh-pages)\n\n---\n\nThe following instructions show you how to do it by force pushing your build to\nthe ``gh-pages`` branch,\nbut it should not be very different from other solutions.\n\n## Why force pushing?\n\nWhy do you want to keep track of the builded website when you can just rebuild\nit any time?  \n**Keep in mind that the branch can become huge since builded website is mainly\nsingle line HTML and JSON file (diff is expensive).**  \nBy just keeping a single builded version, you avoid your repo to unnecessarily grow in size.\n\n## Create the script\n\nThe script below will get a ``GIT_DEPLOY_REPO`` repo to deploy (or by default\nthe ``repository`` url of your ``package.json``).\n\nYou can paste it under ``./scripts/deploy.sh``.\n\n### OS X / Linux\n\n```bash\n#!/usr/bin/env bash\nGIT_DEPLOY_REPO=${GIT_DEPLOY_REPO:-$(node -e 'process.stdout.write(require(\"./package.json\").repository)')}\n\ncd dist && \\\n$(npm bin)/rimraf .git\ngit init && \\\ngit add . && \\\ngit commit -m \"Deploy to GitHub Pages\" && \\\ngit push --force \"${GIT_DEPLOY_REPO}\" master:gh-pages\n```\n\n_If you want to use this script for a ``*.github.io`` repo, please adjust the\nlast line argument to ``src:master`` (if you source branch is `src`) in order\nto deploy your source branch to ``master`` (which is the ``gh-pages`` branch for\ngithub.io repos)._\n\n### Windows\n\n@todo (should not be hard to adapt the shell script above into a bat script,\nplease make a PR if you do it).\n\n### Add a command to deploy\n\nIn your `package.json`, add the following items under the `scripts` section:\n\n```js\n{\n  \"scripts\": {\n    // ...\n    \"predeploy\": \"npm run build\",\n    \"deploy\": \"./scripts/deploy.sh\"\n  }\n}\n```\n\nNow run:\n\n```console\n$ npm run deploy\n```\n\nIt should be good!\n\n#### Automatically with Travis-CI\n\nHere is one quick and easy way to setup automatic deployment on each commit\npushed to master that should take a couple of minutes to setup:\n\n##### Enable Travis-CI for your repository\n\n- https://travis-ci.org/profile\n\nYou may need to hit the `Sync` button to see your repository if it's not there.\n\n##### Create a `.travis.yml`\n\n```yml\nlanguage: node_js\nnode_js:\n  - '5'\n  - '4'\n\n# (by default, Travis will run \"npm test\" script when the language is node_js)\n\n# deploy is run after \"npm test\"\ndeploy:\n  # keep the build we just made with \"npm test\" (dist/)\n  skip_cleanup: true\n\n  # define the script to use for deployment\n  provider: script\n  script: ./scripts/deploy.sh\n\n  # only run on one version of node (v5 here)\n  on:\n    branch: master\n    node: '5'\n```\n\n##### Generate a new token\n\n- https://github.com/settings/tokens/new\n\nWith only `repo` or `public_repo` scopes.\n\n##### Copy and encrypt this new token\n\n*Note: replace `{YOU/YOUR_REPO}` and `{YOUR_TOKEN}`.*\n\n```console\n$ npm i -g travis-encrypt\n$ travis-encrypt --add --repo {YOU/YOUR_REPO} GITHUB_TOKEN={YOUR_TOKEN}\n```\n\n## Adjust the deploy script\n\n__You need to add a git user email and name:__\n\n```sh\n#!/usr/bin/env bash\nGIT_DEPLOY_REPO=${GIT_DEPLOY_REPO:-$(node -e 'process.stdout.write(require(\"./package.json\").repository)')}\n\nif [ \"$TRAVIS\" = \"true\" ]\nthen\n  # git need this, on Travis-CI nobody is defined\n  git config --global user.name \"Travis CI\" && \\\n  git config --global user.email \"travis@travis-ci.org\"\nfi\n\ncd dist && \\\n$(npm bin)/rimraf .git && \\\ngit init && \\\ngit add . && \\\ngit commit -m \"Deploy to GitHub Pages\" && \\\ngit push --force \"${GIT_DEPLOY_REPO}\" master:gh-pages\n```\n\n##### Ensure that the build is done on the CI\n\nIf not already made, add a `test` script in your `package.json` `scripts`\nsection.\n\n```js\n{\n  \"scripts\": {\n    \"test\": \"npm run build\",\n    // ...\n    \"predeploy\": \"npm run build\",\n    \"deploy\": \"./scripts/deploy.sh\"\n  }\n}\n```\n\nNow, commit and push to master, wait a couple of minutes and it should be good.\n\n_If you plan to rely on Travis only, you can remove the `predeploy` and\n`deploy` scripts that we defined earlier._\nOr you can keep it, just in case.\n","__filename":"docs/usage/gh-pages.md","__url":"/docs/usage/gh-pages/","__resourceUrl":"/docs/usage/gh-pages/index.html","__dataUrl":"/docs/usage/gh-pages/index.html.4f3b6f8367c1b0395ff6c8a525f28ded.json"}